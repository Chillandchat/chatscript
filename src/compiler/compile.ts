import fs from "fs";

import { TreeNode } from "./index.d";
import parse from "./parse";

const compile = (): void => {
  const ast: Array<TreeNode> = parse(process.argv[2]);

  fs.writeFileSync(
    "./out.chat",
    `This file is automatically generated, DO NOT EDIT DIRECTLY!! \n${Buffer.from(
      JSON.stringify(ast)
    ).toString("base64")}`
  );
};

export default compile;
